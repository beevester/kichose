{"remainingRequest":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/src/pages/template/FilesTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/src/pages/template/FilesTable.vue","mtime":1601470421812},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/cache-loader/dist/cjs.js","mtime":1601472830261},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/babel-loader/lib/index.js","mtime":1601472829745},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/cache-loader/dist/cjs.js","mtime":1601472830261},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/vue-loader/lib/index.js","mtime":1601472869555}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaWxlc2l6ZSBmcm9tICcuLi8uLi8uLi9ub2RlX21vZHVsZXMvZmlsZXNpemUnCmltcG9ydCBheGlvcyBmcm9tICcuLi8uLi9pbnRlcmNlcHRvcicKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRmlsZXNUYWJsZScsCiAgcHJvcHM6IHsKICAgIGZpbGVzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiBbXQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGhlYWRlcnM6IFsKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoJ2lkJyksIHZhbHVlOiAnaWQnIH0sCiAgICAgICAgeyB0ZXh0OiB0aGlzLiR0KCdvcmlnaW5hbE5hbWUnKSwgdmFsdWU6ICdvcmlnaW5hbE5hbWUnIH0sCiAgICAgICAgeyB0ZXh0OiB0aGlzLiR0KCdzaXplJyksIHZhbHVlOiAnc2l6ZScgfSwKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoJ21pbWVUeXBlJyksIHZhbHVlOiAnbWltZVR5cGUnIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogdGhpcy4kdCgnY3JlYXRlZEF0JyksCiAgICAgICAgICB2YWx1ZTogJ2NyZWF0ZWRBdCcsCiAgICAgICAgICB0eXBlOiAnZGF0ZXRpbWUnLAogICAgICAgICAgc29ydGFibGU6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICB7IHRleHQ6ICcnLCB2YWx1ZTogJ2FjdGlvbnMnLCBzb3J0YWJsZTogZmFsc2UgfQogICAgICBdCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBieXRlcyhzaXplKSB7CiAgICAgIHJldHVybiBmaWxlc2l6ZShzaXplKQogICAgfSwKICAgIGRvd25sb2FkKGZpbGUpIHsKICAgICAgYXhpb3MoewogICAgICAgIHVybDogYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMfS9maWxlcy9kb3dubG9hZC8ke2ZpbGUuaWR9YCwKICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InIC8vIGltcG9ydGFudAogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zdCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbcmVzcG9uc2UuZGF0YV0pKQogICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykKICAgICAgICBsaW5rLmhyZWYgPSB1cmwKICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCBmaWxlLm9yaWdpbmFsTmFtZSkKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspCiAgICAgICAgbGluay5jbGljaygpCiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["FilesTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FilesTable.vue","sourceRoot":"src/pages/template","sourcesContent":["<template>\n  <is-table v-if=\"files.length\" :headers=\"headers\" :items=\"files\">\n    <template v-slot:item.size=\"{ item }\">\n      {{ bytes(item.size) }}\n    </template>\n    <template v-slot:item.actions=\"{ item }\">\n      <div class=\"text-right\">\n        <v-btn color=\"primary\" text x-small @click.stop=\"download(item)\">\n          <v-icon small class=\"mr-1\">\n            save_alt\n          </v-icon>\n          {{ $t('file_download') }}\n        </v-btn>\n      </div>\n    </template>\n  </is-table>\n</template>\n\n<script>\nimport filesize from '../../../node_modules/filesize'\nimport axios from '../../interceptor'\n\nexport default {\n  name: 'FilesTable',\n  props: {\n    files: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      headers: [\n        { text: this.$t('id'), value: 'id' },\n        { text: this.$t('originalName'), value: 'originalName' },\n        { text: this.$t('size'), value: 'size' },\n        { text: this.$t('mimeType'), value: 'mimeType' },\n        {\n          text: this.$t('createdAt'),\n          value: 'createdAt',\n          type: 'datetime',\n          sortable: false\n        },\n        { text: '', value: 'actions', sortable: false }\n      ]\n    }\n  },\n  methods: {\n    bytes(size) {\n      return filesize(size)\n    },\n    download(file) {\n      axios({\n        url: `${process.env.VUE_APP_API_URL}/files/download/${file.id}`,\n        method: 'GET',\n        responseType: 'blob' // important\n      }).then(response => {\n        const url = window.URL.createObjectURL(new Blob([response.data]))\n        const link = document.createElement('a')\n        link.href = url\n        link.setAttribute('download', file.originalName)\n        document.body.appendChild(link)\n        link.click()\n      })\n    }\n  }\n}\n</script>\n"]}]}