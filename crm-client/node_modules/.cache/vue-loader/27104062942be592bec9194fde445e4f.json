{"remainingRequest":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/src/components/layout/MainSlot.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/src/components/layout/MainSlot.vue","mtime":1601482335052},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/css-loader/dist/cjs.js","mtime":1601472868033},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1601472869555},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/postcss-loader/src/index.js","mtime":1601472869402},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/sass-loader/dist/cjs.js","mtime":1601472905881},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/cache-loader/dist/cjs.js","mtime":1601472830261},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/vue-loader/lib/index.js","mtime":1601472869555}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnYtbmF2aWdhdGlvbi1kcmF3ZXIgewogIC52LWxpc3QgewogICAgJi1ncm91cC0tYWN0aXZlIHsKICAgICAgLnYtbGlzdC1ncm91cF9faXRlbXMgewogICAgICAgIGJhY2tncm91bmQ6ICMxNDI0MzA7CiAgICAgIH0KICAgICAgLnYtbGlzdC1ncm91cF9faGVhZGVyIHsKICAgICAgICBiYWNrZ3JvdW5kOiAjMTQyNDMwOwogICAgICB9CiAgICB9CiAgICAudGhlbWUtLWRhcmsgewogICAgICAudi1pY29uIHsKICAgICAgICBjb2xvcjogI2ZmZiAhaW1wb3J0YW50OwogICAgICB9CiAgICB9CiAgfQp9Ci5hY3RpdmUtaXRlbSB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogICY6OmJlZm9yZSB7CiAgICBjb250ZW50OiAnJzsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMDsKICAgIGxlZnQ6IDA7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKICAgIG9wYWNpdHk6IDAuMyAhaW1wb3J0YW50OwogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYSAhaW1wb3J0YW50OwogIH0KfQo="},{"version":3,"sources":["MainSlot.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+eA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MainSlot.vue","sourceRoot":"src/components/layout","sourcesContent":["<template>\n  <v-app id=\"inspire\">\n    <v-navigation-drawer\n      v-model=\"drawer\"\n      :clipped=\"$vuetify.breakpoint.lgAndUp\"\n      app\n      dark\n      hide-overlay\n      :src=\"bg\"\n    >\n      <v-list dense>\n        <template v-for=\"item in items\">\n          <v-list-group\n            v-if=\"isGrantedItem(item)\"\n            :key=\"item.label\"\n            ref=\"listGroup\"\n            v-model=\"item.model\"\n            :prepend-icon=\"prependIcon(item)\"\n            :append-icon=\"appendIcon(item)\"\n            @click=\"listItemClick(item)\"\n          >\n            <template v-slot:activator>\n              <v-list-item>\n                <v-list-item-content>\n                  <v-list-item-title>\n                    {{ $t(item.label) }}\n                  </v-list-item-title>\n                </v-list-item-content>\n              </v-list-item>\n            </template>\n\n            <template v-for=\"(child, i) in item.children\">\n              <v-list-item\n                v-if=\"isGrantedItem(child)\"\n                :key=\"i\"\n                :class=\"{\n                  'active-item': routeName(child.route) === activeRoute\n                }\"\n                @click=\"listItemClick(child)\"\n              >\n                <v-list-item-action v-if=\"child.icon\">\n                  <v-icon right>\n                    {{ child.icon }}\n                  </v-icon>\n                </v-list-item-action>\n                <v-list-item-content>\n                  <v-list-item-title>\n                    {{ $t(child.label) }}\n                  </v-list-item-title>\n                </v-list-item-content>\n              </v-list-item>\n            </template>\n          </v-list-group>\n        </template>\n      </v-list>\n    </v-navigation-drawer>\n\n    <v-app-bar\n      :clipped-left=\"$vuetify.breakpoint.lgAndUp\"\n      app\n      color=\"primary\"\n      dark\n      :src=\"bg\"\n    >\n      <v-toolbar-title style=\"width: 300px\" class=\"ml-0\">\n        <v-app-bar-nav-icon @click.stop=\"drawer = !drawer\"></v-app-bar-nav-icon>\n        <span class=\"hidden-sm-and-down mx-2\">Inshop CRM</span>\n      </v-toolbar-title>\n\n      <v-row class=\"flex-column\">\n        <v-form\n          v-if=\"isGranted('ROLE_OTHER_SEARCH')\"\n          method=\"get\"\n          class=\"hidden-sm-and-down\"\n          @submit.prevent=\"search\"\n        >\n          <v-text-field\n            v-model=\"q\"\n            flat\n            hide-details\n            solo-inverted\n            prepend-inner-icon=\"search\"\n            label=\"Search\"\n          ></v-text-field>\n        </v-form>\n      </v-row>\n\n      <v-spacer></v-spacer>\n\n      <span class=\"mx-2\">{{ username }}</span>\n      <v-btn icon @click=\"signOut\">\n        <v-icon>mdi-power</v-icon>\n      </v-btn>\n    </v-app-bar>\n\n    <v-content>\n      <router-view />\n    </v-content>\n\n    <is-footer></is-footer>\n\n    <modal-not-done-tasks\n      :tasks=\"tasks\"\n      :dialog=\"dialog\"\n      @dialog-close=\"dialog = false\"\n    ></modal-not-done-tasks>\n  </v-app>\n</template>\n\n<script>\nimport fecha from 'fecha'\nimport bg from '@/assets/bg.png'\nimport ModalNotDoneTasks from './ModalNotDoneTasks'\nimport axios from '../../interceptor'\n\nexport default {\n  name: 'MainSlot',\n  components: { ModalNotDoneTasks },\n  data() {\n    return {\n      bg,\n      fecha,\n      q: null,\n      tasks: [],\n      dialog: false,\n      drawer: null,\n      activeRoute: null,\n      items: [\n        {\n          label: 'dashboard',\n          icon: 'dashboard',\n          route: 'Dashboard',\n          role: 'ROLE_USER_DASHBOARD'\n        },\n        {\n          label: 'calendar',\n          icon: 'perm_contact_calendar',\n          route: 'Calendar',\n          role: 'ROLE_OTHER_CALENDAR'\n        },\n        {\n          label: 'clients',\n          icon: 'people',\n          route: 'ClientList',\n          role: 'ROLE_CLIENT_LIST'\n        },\n        {\n          label: 'companies',\n          icon: 'grade',\n          route: 'CompanyList',\n          role: 'ROLE_COMPANY_LIST'\n        },\n        {\n          label: 'Opportunities',\n          icon: 'folder_open',\n          route: 'OpportunityList',\n          role: 'ROLE_PROJECT_LIST'\n        },\n        {\n          label: 'projects',\n          icon: 'folder_open',\n          route: 'ProjectList',\n          role: 'ROLE_PROJECT_LIST'\n        },\n        {\n          label: 'tasks',\n          icon: 'access_time',\n          route: 'TaskList',\n          role: 'ROLE_TASK_LIST'\n        },\n        {\n          label: 'documents',\n          icon: 'insert_drive_file',\n          children: [\n            {\n              label: 'documents',\n              icon: 'turned_in',\n              route: 'DocumentList',\n              role: 'ROLE_DOCUMENT_LIST'\n            },\n            {\n              label: 'templates',\n              icon: 'turned_in_not',\n              route: 'TemplateList',\n              role: 'ROLE_TEMPLATE_LIST'\n            },\n            {\n              label: 'template_types',\n              icon: 'tune',\n              route: 'TemplateTypeList',\n              role: 'ROLE_TEMPLATE_TYPE_LIST'\n            }\n          ]\n        },\n        {\n          label: 'contacts',\n          icon: 'contacts',\n          children: [\n            {\n              label: 'contacts',\n              icon: 'local_phone',\n              route: 'ContactList',\n              role: 'ROLE_CONTACT_LIST'\n            },\n            {\n              label: 'address',\n              icon: 'my_location',\n              route: 'AddressList',\n              role: 'ROLE_ADDRESS_LIST'\n            }\n          ]\n        },\n        {\n          label: 'product',\n          icon: 'store',\n          children: [\n            {\n              label: 'category',\n              icon: 'format_align_justify',\n              route: 'CategoryList',\n              role: 'ROLE_CATEGORY_LIST'\n            },\n            {\n              label: 'product',\n              icon: 'format_align_justify',\n              route: 'ProductList',\n              role: 'ROLE_PRODUCT_LIST'\n            }\n          ]\n        },\n        {\n          label: 'cms',\n          icon: 'mode_edit',\n          children: [\n            {\n              label: 'text',\n              icon: 'text_fields',\n              route: 'TextList',\n              role: 'ROLE_TEXT_LIST'\n            }\n          ]\n        },\n        {\n          label: 'order_header',\n          icon: 'local_grocery_store',\n          children: [\n            {\n              label: 'order_header',\n              icon: 'assignment',\n              route: 'OrderHeaderList',\n              role: 'ROLE_ORDER_HEADER_LIST'\n            },\n            {\n              label: 'order_status',\n              icon: 'library_books',\n              route: 'OrderStatusList',\n              role: 'ROLE_ORDER_STATUS_LIST'\n            },\n            {\n              label: 'order_line_status',\n              icon: 'format_align_justify',\n              route: 'OrderLineStatusList',\n              role: 'ROLE_ORDER_LINE_STATUS_LIST'\n            }\n          ]\n        },\n        {\n          label: 'invoice_header',\n          icon: 'attach_money',\n          children: [\n            {\n              label: 'invoice_header',\n              icon: 'format_align_justify',\n              route: 'InvoiceHeaderList',\n              role: 'ROLE_INVOICE_HEADER_LIST'\n            },\n            {\n              label: 'invoice_status',\n              icon: 'format_align_justify',\n              route: 'InvoiceStatusList',\n              role: 'ROLE_INVOICE_STATUS_LIST'\n            },\n            {\n              label: 'invoice_type',\n              icon: 'format_align_justify',\n              route: 'InvoiceTypeList',\n              role: 'ROLE_INVOICE_TYPE_LIST'\n            }\n          ]\n        },\n        {\n          label: 'dictionaries',\n          icon: 'list',\n          children: [\n            {\n              label: 'country',\n              icon: 'flag',\n              route: 'CountryList',\n              role: 'ROLE_COUNTRY_LIST'\n            },\n            {\n              label: 'language',\n              icon: 'format_align_justify',\n              route: 'LanguageList',\n              role: 'ROLE_LANGUAGE_LIST'\n            },\n            {\n              label: 'vat',\n              icon: 'format_align_justify',\n              route: 'VatList',\n              role: 'ROLE_VAT_LIST'\n            },\n            {\n              label: 'currency',\n              icon: 'format_align_justify',\n              route: 'CurrencyList',\n              role: 'ROLE_CURRENCY_LIST'\n            },\n            {\n              label: 'contact_type',\n              icon: 'call_end',\n              route: 'ContactTypeList',\n              role: 'ROLE_CONTACT_TYPE_LIST'\n            },\n            {\n              label: 'project_type',\n              icon: 'work',\n              route: 'ProjectTypeList',\n              role: 'ROLE_PROJECT_TYPE_LIST'\n            },\n            {\n              label: 'project_status',\n              icon: 'web',\n              route: 'ProjectStatusList',\n              role: 'ROLE_PROJECT_STATUS_LIST'\n            },\n            {\n              label: 'task_status',\n              icon: 'web_asset',\n              route: 'TaskStatusList',\n              role: 'ROLE_TASK_STATUS_LIST'\n            },\n            {\n              label: 'brand',\n              icon: 'format_align_justify',\n              route: 'BrandList',\n              role: 'ROLE_BRAND_LIST'\n            },\n            {\n              label: 'channel',\n              icon: 'format_align_justify',\n              route: 'ChannelList',\n              role: 'ROLE_CHANNEL_LIST'\n            },\n            {\n              label: 'label',\n              icon: 'label',\n              route: 'LabelList',\n              role: 'ROLE_LABEL_LIST'\n            },\n            {\n              label: 'paymentType',\n              icon: 'format_align_justify',\n              route: 'PaymentTypeList',\n              role: 'ROLE_PAYMENT_TYPE_LIST'\n            },\n            {\n              label: 'shipmentMethod',\n              icon: 'format_align_justify',\n              route: 'ShipmentMethodList',\n              role: 'ROLE_SHIPMENT_METHOD_LIST'\n            }\n          ]\n        },\n        {\n          label: 'users',\n          icon: 'security',\n          children: [\n            {\n              label: 'users',\n              icon: 'account_box',\n              route: 'UserList',\n              role: 'ROLE_USER_LIST'\n            },\n            {\n              label: 'groups',\n              icon: 'people_outline',\n              route: 'GroupList',\n              role: 'ROLE_GROUP_LIST'\n            }\n          ]\n        },\n        {\n          label: 'maintenance',\n          icon: 'settings',\n          children: [\n            {\n              label: 'history',\n              icon: 'timelapse',\n              route: 'HistoryList',\n              role: 'ROLE_HISTORY_LIST'\n            }\n          ]\n        }\n      ]\n    }\n  },\n  computed: {\n    username() {\n      return this.$store.getters['auth/jwtDecoded'].name\n    }\n  },\n  watch: {\n    $route(to, from) {\n      this.activeRoute = this.routeName(to.name)\n      this.initActiveMenuItem()\n    }\n  },\n  created() {\n    this.activeRoute = this.routeName(this.$route.name)\n  },\n  mounted() {\n    if (this.isGranted('ROLE_TASK_LIST')) {\n      this.getTasks()\n    }\n\n    this.initActiveMenuItem()\n  },\n  methods: {\n    initActiveMenuItem() {\n      this.items.forEach(i => {\n        if (i.children && i.children.length) {\n          i.children.forEach(el => {\n            if (this.routeName(el.route) === this.activeRoute) {\n              i.model = true\n            }\n          })\n        } else if (this.routeName(i.route) === this.activeRoute) {\n          i.model = true\n        }\n      })\n    },\n    routeName(route) {\n      return route ? route.replace(/(List|Show|Create|Update)/, '') : ''\n    },\n    prependIcon(item) {\n      if (item.icon) {\n        return item.icon\n      }\n    },\n    appendIcon(item) {\n      if (item.children && item.children.length) {\n        return 'keyboard_arrow_down'\n      }\n\n      return null\n    },\n    listItemClick(item) {\n      if (item.route) {\n        this.$router.push({ name: item.route })\n      }\n    },\n    isGrantedItem(item) {\n      if (item.role) {\n        return this.isGranted(item.role)\n      }\n\n      if (item.children) {\n        return item.children.some(child => this.isGranted(child.role))\n      }\n\n      return false\n    },\n    search() {\n      this.$router.push({ name: 'Search', query: { q: this.q } })\n    },\n    signOut() {\n      this.$store.dispatch('auth/logout')\n    },\n    getTasks() {\n      const url = `${process.env.VUE_APP_API_URL}/tasks/deadline`\n\n      axios.get(url).then(response => {\n        this.tasks = response.data['hydra:member']\n\n        if (this.tasks.length) {\n          this.dialog = true\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.v-navigation-drawer {\n  .v-list {\n    &-group--active {\n      .v-list-group__items {\n        background: #142430;\n      }\n      .v-list-group__header {\n        background: #142430;\n      }\n    }\n    .theme--dark {\n      .v-icon {\n        color: #fff !important;\n      }\n    }\n  }\n}\n.active-item {\n  position: relative;\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0.3 !important;\n    background-color: #fafafa !important;\n  }\n}\n</style>\n"]}]}