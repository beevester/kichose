{"remainingRequest":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/src/pages/client/ClientContacts.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/src/pages/client/ClientContacts.vue","mtime":1601470421786},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/babel-loader/lib/index.js","mtime":1601472829745},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/cache-loader/dist/cjs.js","mtime":1601472830261},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/vue-loader/lib/index.js","mtime":1601472869555}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JwppbXBvcnQgTW9kYWxDb250YWN0Rm9ybSBmcm9tICcuL01vZGFsQ29udGFjdEZvcm0nCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBNb2RhbENvbnRhY3RGb3JtIH0sCiAgcHJvcHM6IHsKICAgIHBhcmVudDogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgY29udGFjdHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICcnLAogICAgICBpdGVtOiB7fSwKICAgICAgY2FsbGJhY2s6ICgpID0+ICh7fSksCiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIGhlYWRlcnM6IFsKICAgICAgICB7IHRleHQ6IHRoaXMuJHQoJ2lkJyksIHZhbHVlOiAnaWQnIH0sCiAgICAgICAgeyB0ZXh0OiB0aGlzLiR0KCdjb250YWN0X3ZhbHVlJyksIHZhbHVlOiAndmFsdWUnIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogdGhpcy4kdCgnY29udGFjdFR5cGVfbmFtZScpLAogICAgICAgICAgdmFsdWU6ICdjb250YWN0VHlwZS5uYW1lJywKICAgICAgICAgIHR5cGU6ICdvYmplY3QnCiAgICAgICAgfSwKICAgICAgICB7IHRleHQ6ICcnLCB2YWx1ZTogJ2FjdGlvbnMnLCBzb3J0YWJsZTogZmFsc2UgfQogICAgICBdLAogICAgICBrZXk6IDEKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoewogICAgICByZW1vdmU6ICdjb250YWN0L3JlbW92ZScsCiAgICAgIHVwZGF0ZUl0ZW06ICdjb250YWN0L3VwZGF0ZScsCiAgICAgIGNyZWF0ZUl0ZW06ICdjb250YWN0L2NyZWF0ZScKICAgIH0pLAogICAgZGVsZXRlSXRlbShpdGVtKSB7CiAgICAgIGlmICh3aW5kb3cuY29uZmlybSh0aGlzLiR0KCdkZWxldGVfYXJlX3lvdV9zdXJlJykpKSB7CiAgICAgICAgdGhpcy5yZW1vdmUoaXRlbSkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiR0b2FzdHIucygKICAgICAgICAgICAgdGhpcy4kdCgnY29udGFjdF9kZWxldGVkJywgeyBlbnRpdHk6IGl0ZW0udmFsdWUgfSksCiAgICAgICAgICAgIHRoaXMuJHQoJ2RlbGV0ZWQnKQogICAgICAgICAgKQoKICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZWQnKQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBnb3RvKGl0ZW0pIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAnQ29udGFjdFNob3cnLCBwYXJhbXM6IHsgaWQ6IGl0ZW0uaWQgfSB9KQogICAgfSwKICAgIGNyZWF0ZSgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjb250YWN0L0NPTlRBQ1RfVVBEQVRFX0lURU0nLCB0aGlzLnBhcmVudCkKCiAgICAgIHRoaXMudGl0bGUgPSB0aGlzLiR0KCdjb250YWN0X2FkZCcpCiAgICAgIHRoaXMuaXRlbSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NvbnRhY3QvaXRlbSddCiAgICAgIHRoaXMuY2FsbGJhY2sgPSB0aGlzLmNyZWF0ZUl0ZW0KCiAgICAgIHRoaXMuZGlhbG9nID0gdHJ1ZQogICAgfSwKICAgIGVkaXQoaXRlbSkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NvbnRhY3QvQ09OVEFDVF9TRVRfSVRFTScsIGl0ZW0pCgogICAgICB0aGlzLnRpdGxlID0gdGhpcy4kdCgnY29udGFjdF9lZGl0JywgeyBlbnRpdHk6IGl0ZW0udmFsdWUgfSkKICAgICAgdGhpcy5pdGVtID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY29udGFjdC9pdGVtJ10KICAgICAgdGhpcy5jYWxsYmFjayA9IHRoaXMudXBkYXRlSXRlbQoKICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlCiAgICB9LAogICAgb25DbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZQogICAgfSwKICAgIHJlc2V0Rm9ybSgpIHsKICAgICAgdGhpcy5rZXkrKwogICAgfQogIH0KfQo="},{"version":3,"sources":["ClientContacts.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ClientContacts.vue","sourceRoot":"src/pages/client","sourcesContent":["<template>\n  <v-row>\n    <v-col cols=\"12\" class=\"mb-4\">\n      <v-dialog v-model=\"dialog\" width=\"600\">\n        <template v-slot:activator=\"{ on }\">\n          <v-btn\n            class=\"mx-1\"\n            color=\"success\"\n            large\n            @click=\"create($event.target)\"\n          >\n            {{ $t('contact_add') }}\n          </v-btn>\n        </template>\n\n        <modal-contact-form\n          :key=\"key\"\n          :callback=\"callback\"\n          :title=\"title\"\n          :item=\"item\"\n          @dialog-close=\"onCloseDialog\"\n          @reset-form=\"resetForm\"\n          @contacts-changed=\"$emit('changed')\"\n        />\n      </v-dialog>\n    </v-col>\n\n    <v-col cols=\"12\">\n      <is-table\n        :headers=\"headers\"\n        :items=\"contacts\"\n        :hide-default-footer=\"true\"\n      >\n        <template v-slot:item.actions=\"{ item }\">\n          <v-row justify=\"end\">\n            <v-btn text small @click=\"goto(item, $event.target)\">\n              <v-icon color=\"primary\">remove_red_eye</v-icon>\n            </v-btn>\n            <v-btn text small @click=\"edit(item, $event.target)\">\n              <v-icon color=\"primary\">edit</v-icon>\n            </v-btn>\n            <v-btn text small @click=\"deleteItem(item)\">\n              <v-icon color=\"primary\">delete_forever</v-icon>\n            </v-btn>\n          </v-row>\n        </template>\n      </is-table>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport { mapActions } from 'vuex'\nimport ModalContactForm from './ModalContactForm'\n\nexport default {\n  components: { ModalContactForm },\n  props: {\n    parent: {\n      type: Object,\n      required: true\n    },\n    contacts: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      title: '',\n      item: {},\n      callback: () => ({}),\n      dialog: false,\n      headers: [\n        { text: this.$t('id'), value: 'id' },\n        { text: this.$t('contact_value'), value: 'value' },\n        {\n          text: this.$t('contactType_name'),\n          value: 'contactType.name',\n          type: 'object'\n        },\n        { text: '', value: 'actions', sortable: false }\n      ],\n      key: 1\n    }\n  },\n  methods: {\n    ...mapActions({\n      remove: 'contact/remove',\n      updateItem: 'contact/update',\n      createItem: 'contact/create'\n    }),\n    deleteItem(item) {\n      if (window.confirm(this.$t('delete_are_you_sure'))) {\n        this.remove(item).then(() => {\n          this.$toastr.s(\n            this.$t('contact_deleted', { entity: item.value }),\n            this.$t('deleted')\n          )\n\n          this.$emit('changed')\n        })\n      }\n    },\n    goto(item) {\n      this.$router.push({ name: 'ContactShow', params: { id: item.id } })\n    },\n    create() {\n      this.$store.commit('contact/CONTACT_UPDATE_ITEM', this.parent)\n\n      this.title = this.$t('contact_add')\n      this.item = this.$store.getters['contact/item']\n      this.callback = this.createItem\n\n      this.dialog = true\n    },\n    edit(item) {\n      this.$store.commit('contact/CONTACT_SET_ITEM', item)\n\n      this.title = this.$t('contact_edit', { entity: item.value })\n      this.item = this.$store.getters['contact/item']\n      this.callback = this.updateItem\n\n      this.dialog = true\n    },\n    onCloseDialog() {\n      this.dialog = false\n    },\n    resetForm() {\n      this.key++\n    }\n  }\n}\n</script>\n"]}]}