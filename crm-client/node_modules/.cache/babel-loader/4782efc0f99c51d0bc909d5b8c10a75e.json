{"remainingRequest":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/thread-loader/dist/cjs.js!/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/babel-loader/lib/index.js!/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/src/store/modules/auth/index.js","dependencies":[{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/src/store/modules/auth/index.js","mtime":1601470421825},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/.babelrc","mtime":1601470421774},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/cache-loader/dist/cjs.js","mtime":1601472830261},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/thread-loader/dist/cjs.js","mtime":1601472830664},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/babel-loader/lib/index.js","mtime":1601472829745},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1601472857689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9tdXRhdGlvbnM7CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKaW1wb3J0IGp3dERlY29kZSBmcm9tICdqd3QtZGVjb2RlJzsKaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnLi9tdXRhdGlvbl90eXBlcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vLi4vLi4vcm91dGVyJzsKaW1wb3J0IGF4aW9zIGZyb20gJy4uLy4uLy4uL2ludGVyY2VwdG9yJzsKdmFyIGFjdGlvbnMgPSB7CiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIGRhdGEpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIGNvbW1pdCh0eXBlcy5BVVRIX0VSUk9SX0NIQU5HRSwgbnVsbCk7CiAgICB2YXIgdXJsID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTCwgIi9sb2dpbiIpOwogICAgcmV0dXJuIGF4aW9zLnBvc3QodXJsLCBkYXRhKS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICBjb21taXQodHlwZXMuQVVUSF9FUlJPUl9DSEFOR0UsICdVc2VybmFtZSBvciBwYXNzd29yZCBhcmUgaW5jb3JyZWN0Jyk7CiAgICAgIHRocm93IGU7CiAgICB9KTsKICB9LAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgY29tbWl0KHR5cGVzLkFVVEhfUkVTRVQpOwogICAgcm91dGVyLnB1c2goewogICAgICBuYW1lOiAnU2lnbkluJwogICAgfSk7CiAgfQp9OwoKZnVuY3Rpb24gaW5pdGlhbFN0YXRlKCkgewogIHJldHVybiB7CiAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyksCiAgICByb2xlczogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JvbGVzJykgfHwgW10sCiAgICBsYW5ndWFnZTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xhbmd1YWdlJykgfHwgJ2VuJywKICAgIGVycm9yOiBudWxsCiAgfTsKfQoKdmFyIHN0YXRlID0gaW5pdGlhbFN0YXRlKCk7CnZhciBnZXR0ZXJzID0gewogIGp3dERlY29kZWQ6IGZ1bmN0aW9uIGp3dERlY29kZWQoc3RhdGUpIHsKICAgIHZhciB0b2tlbiA9IHN0YXRlLnRva2VuIHx8IG51bGw7CgogICAgaWYgKHRva2VuICE9PSBudWxsKSB7CiAgICAgIHJldHVybiBqd3REZWNvZGUoc3RhdGUudG9rZW4pOwogICAgfQogIH0sCiAgcm9sZXM6IGZ1bmN0aW9uIHJvbGVzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUucm9sZXM7CiAgfSwKICBsYW5ndWFnZTogZnVuY3Rpb24gbGFuZ3VhZ2Uoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5sYW5ndWFnZTsKICB9LAogIGVycm9yOiBmdW5jdGlvbiBlcnJvcihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmVycm9yOwogIH0KfTsKdmFyIG11dGF0aW9ucyA9IChfbXV0YXRpb25zID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCB0eXBlcy5BVVRIX1VQREFURV9UT0tFTiwgZnVuY3Rpb24gKHN0YXRlLCBkYXRhKSB7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgZGF0YS50b2tlbik7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JvbGVzJywgZGF0YS5yb2xlcyk7CiAgc3RhdGUudG9rZW4gPSBkYXRhLnRva2VuOwogIHN0YXRlLnJvbGVzID0gZGF0YS5yb2xlczsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCB0eXBlcy5BVVRIX1VQREFURV9MQU5HVUFHRSwgZnVuY3Rpb24gKHN0YXRlLCBsYW5ndWFnZSkgewogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsYW5ndWFnZScsIGxhbmd1YWdlKTsKICBzdGF0ZS5sYW5ndWFnZSA9IGxhbmd1YWdlOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIHR5cGVzLkFVVEhfRVJST1JfQ0hBTkdFLCBmdW5jdGlvbiAoc3RhdGUsIGVycm9yKSB7CiAgc3RhdGUuZXJyb3IgPSBlcnJvcjsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCB0eXBlcy5BVVRIX1JFU0VULCBmdW5jdGlvbiAoc3RhdGUpIHsKICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbmFtZScpOwogIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdsYW5ndWFnZScpOwogIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdlcnJvcicpOwogIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdyb2xlcycpOwogIHZhciBzID0gaW5pdGlhbFN0YXRlKCk7CiAgT2JqZWN0LmtleXMocykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICBzdGF0ZVtrZXldID0gc1trZXldOwogIH0pOwp9KSwgX211dGF0aW9ucyk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMKfTs="},{"version":3,"sources":["/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/src/store/modules/auth/index.js"],"names":["jwtDecode","types","router","axios","actions","login","data","commit","AUTH_ERROR_CHANGE","url","process","env","VUE_APP_API_URL","post","catch","e","logout","AUTH_RESET","push","name","initialState","token","localStorage","getItem","roles","language","error","state","getters","jwtDecoded","mutations","AUTH_UPDATE_TOKEN","setItem","AUTH_UPDATE_LANGUAGE","removeItem","s","Object","keys","forEach","key","namespaced"],"mappings":"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","sourcesContent":["import jwtDecode from 'jwt-decode'\nimport * as types from './mutation_types'\nimport router from '../../../router'\nimport axios from '../../../interceptor'\n\nconst actions = {\n  login({ commit }, data) {\n    commit(types.AUTH_ERROR_CHANGE, null)\n\n    const url = `${process.env.VUE_APP_API_URL}/login`\n\n    return axios.post(url, data).catch(e => {\n      commit(types.AUTH_ERROR_CHANGE, 'Username or password are incorrect')\n\n      throw e\n    })\n  },\n  logout({ commit }) {\n    commit(types.AUTH_RESET)\n    router.push({ name: 'SignIn' })\n  }\n}\n\nfunction initialState() {\n  return {\n    token: localStorage.getItem('token'),\n    roles: localStorage.getItem('roles') || [],\n    language: localStorage.getItem('language') || 'en',\n    error: null\n  }\n}\n\nconst state = initialState()\n\nconst getters = {\n  jwtDecoded: state => {\n    const token = state.token || null\n    if (token !== null) {\n      return jwtDecode(state.token)\n    }\n  },\n  roles: state => state.roles,\n  language: state => state.language,\n  error: state => state.error\n}\n\nconst mutations = {\n  [types.AUTH_UPDATE_TOKEN](state, data) {\n    localStorage.setItem('token', data.token)\n    localStorage.setItem('roles', data.roles)\n    state.token = data.token\n    state.roles = data.roles\n  },\n  [types.AUTH_UPDATE_LANGUAGE](state, language) {\n    localStorage.setItem('language', language)\n    state.language = language\n  },\n  [types.AUTH_ERROR_CHANGE](state, error) {\n    state.error = error\n  },\n  [types.AUTH_RESET](state) {\n    localStorage.removeItem('token')\n    localStorage.removeItem('name')\n    localStorage.removeItem('language')\n    localStorage.removeItem('error')\n    localStorage.removeItem('roles')\n\n    const s = initialState()\n    Object.keys(s).forEach(key => {\n      state[key] = s[key]\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n}\n"]}]}