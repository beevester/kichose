{"remainingRequest":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/thread-loader/dist/cjs.js!/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/babel-loader/lib/index.js!/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/src/interceptor.js","dependencies":[{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/src/interceptor.js","mtime":1601470421781},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/.babelrc","mtime":1601470421774},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/cache-loader/dist/cjs.js","mtime":1601472830261},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/thread-loader/dist/cjs.js","mtime":1601472830664},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/babel-loader/lib/index.js","mtime":1601472829745},{"path":"/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1601472857689}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4vc3RvcmUnOwppbXBvcnQgKiBhcyB0eXBlcyBmcm9tICcuL3N0b3JlL21vZHVsZXMvZ2VuZXJhbC9tdXRhdGlvbl90eXBlcyc7CmF4aW9zLmRlZmF1bHRzLnRpbWVvdXQgPSAzMDAwMDsKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBzdG9yZS5jb21taXQoImdlbmVyYWwvIi5jb25jYXQodHlwZXMuTE9BRElOR19TVEFSVCkpOwogIHZhciB0b2tlbiA9IHN0b3JlLmdldHRlcnNbJ2F1dGgvand0RGVjb2RlZCddIHx8IG51bGw7CiAgdmFyIGF1dGhvcml6ZWQgPSB0b2tlbiAmJiB0b2tlbi5leHAgPiBEYXRlLm5vdygpIC8gMTAwMDsKCiAgaWYgKGF1dGhvcml6ZWQpIHsKICAgIGNvbmZpZy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gIkJlYXJlciAiLmNvbmNhdChzdG9yZS5zdGF0ZS5hdXRoLnRva2VuKTsKICB9CgogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICBpZiAoY29uZmlnLnVybC5pbmRleE9mKCc/JykgPiAtMSkgewogICAgICBjb25maWcudXJsICs9ICcmWERFQlVHX1NFU1NJT05fU1RBUlQ9UEhQU1RPUk0nOwogICAgfSBlbHNlIHsKICAgICAgY29uZmlnLnVybCArPSAnP1hERUJVR19TRVNTSU9OX1NUQVJUPVBIUFNUT1JNJzsKICAgIH0KICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHN0b3JlLmNvbW1pdCgiZ2VuZXJhbC8iLmNvbmNhdCh0eXBlcy5MT0FESU5HX1NUT1ApKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAoZGF0YSkgewogIHN0b3JlLmNvbW1pdCgiZ2VuZXJhbC8iLmNvbmNhdCh0eXBlcy5MT0FESU5HX1NUT1ApKTsKICByZXR1cm4gZGF0YTsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgc3RvcmUuY29tbWl0KCJnZW5lcmFsLyIuY29uY2F0KHR5cGVzLkxPQURJTkdfU1RPUCkpOwoKICBpZiAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxICYmIGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSAhPT0gJ0JhZCBjcmVkZW50aWFscycpIHsKICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9zaWduaW4nOwogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IGF4aW9zOw=="},{"version":3,"sources":["/Users/beevester/PhpstormProjects/kichoseCrm/inshop-crm-client/src/interceptor.js"],"names":["axios","store","types","defaults","timeout","interceptors","request","use","config","commit","LOADING_START","token","getters","authorized","exp","Date","now","headers","common","Authorization","state","auth","process","env","NODE_ENV","url","indexOf","error","LOADING_STOP","Promise","reject","response","data","status","message","window","location","href"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAO,KAAKC,KAAZ,MAAuB,wCAAvB;AAEAF,KAAK,CAACG,QAAN,CAAeC,OAAf,GAAyB,KAAzB;AAEAJ,KAAK,CAACK,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACE,UAAAC,MAAM,EAAI;AACRP,EAAAA,KAAK,CAACQ,MAAN,mBAAwBP,KAAK,CAACQ,aAA9B;AAEA,MAAMC,KAAK,GAAGV,KAAK,CAACW,OAAN,CAAc,iBAAd,KAAoC,IAAlD;AACA,MAAMC,UAAU,GAAGF,KAAK,IAAIA,KAAK,CAACG,GAAN,GAAYC,IAAI,CAACC,GAAL,KAAa,IAArD;;AAEA,MAAIH,UAAJ,EAAgB;AACdL,IAAAA,MAAM,CAACS,OAAP,CAAeC,MAAf,CAAsBC,aAAtB,oBAAgDlB,KAAK,CAACmB,KAAN,CAAYC,IAAZ,CAAiBV,KAAjE;AACD;;AAED,MAAIW,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,QAAIhB,MAAM,CAACiB,GAAP,CAAWC,OAAX,CAAmB,GAAnB,IAA0B,CAAC,CAA/B,EAAkC;AAChClB,MAAAA,MAAM,CAACiB,GAAP,IAAc,gCAAd;AACD,KAFD,MAEO;AACLjB,MAAAA,MAAM,CAACiB,GAAP,IAAc,gCAAd;AACD;AACF;;AAED,SAAOjB,MAAP;AACD,CApBH,EAqBE,UAAAmB,KAAK,EAAI;AACP1B,EAAAA,KAAK,CAACQ,MAAN,mBAAwBP,KAAK,CAAC0B,YAA9B;AAEA,SAAOC,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACD,CAzBH;AA4BA3B,KAAK,CAACK,YAAN,CAAmB0B,QAAnB,CAA4BxB,GAA5B,CACE,UAAAyB,IAAI,EAAI;AACN/B,EAAAA,KAAK,CAACQ,MAAN,mBAAwBP,KAAK,CAAC0B,YAA9B;AAEA,SAAOI,IAAP;AACD,CALH,EAME,UAAAL,KAAK,EAAI;AACP1B,EAAAA,KAAK,CAACQ,MAAN,mBAAwBP,KAAK,CAAC0B,YAA9B;;AAEA,MACED,KAAK,CAACI,QAAN,IACAJ,KAAK,CAACI,QAAN,CAAeE,MADf,IAEAN,KAAK,CAACI,QAAN,CAAeE,MAAf,KAA0B,GAF1B,IAGAN,KAAK,CAACI,QAAN,CAAeC,IAAf,CAAoBE,OAApB,KAAgC,iBAJlC,EAKE;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,SAAvB;AACD;;AAED,SAAOR,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACD,CAnBH;AAsBA,eAAe3B,KAAf","sourcesContent":["import axios from 'axios'\nimport store from './store'\nimport * as types from './store/modules/general/mutation_types'\n\naxios.defaults.timeout = 30000\n\naxios.interceptors.request.use(\n  config => {\n    store.commit(`general/${types.LOADING_START}`)\n\n    const token = store.getters['auth/jwtDecoded'] || null\n    const authorized = token && token.exp > Date.now() / 1000\n\n    if (authorized) {\n      config.headers.common.Authorization = `Bearer ${store.state.auth.token}`\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (config.url.indexOf('?') > -1) {\n        config.url += '&XDEBUG_SESSION_START=PHPSTORM'\n      } else {\n        config.url += '?XDEBUG_SESSION_START=PHPSTORM'\n      }\n    }\n\n    return config\n  },\n  error => {\n    store.commit(`general/${types.LOADING_STOP}`)\n\n    return Promise.reject(error)\n  }\n)\n\naxios.interceptors.response.use(\n  data => {\n    store.commit(`general/${types.LOADING_STOP}`)\n\n    return data\n  },\n  error => {\n    store.commit(`general/${types.LOADING_STOP}`)\n\n    if (\n      error.response &&\n      error.response.status &&\n      error.response.status === 401 &&\n      error.response.data.message !== 'Bad credentials'\n    ) {\n      window.location.href = '/signin'\n    }\n\n    return Promise.reject(error)\n  }\n)\n\nexport default axios\n"]}]}